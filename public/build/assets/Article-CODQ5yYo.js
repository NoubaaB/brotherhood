import{u as V}from"./Article-D-mu_mWu.js";import{_ as I,u as D,g as M,r as l,o as r,e as f,i as g,a,w as t,b as c,t as d,c as s,h as u,m as j,n as O,p as E}from"./app-CoBBDRNa.js";const b={props:{article:Object},data:function(){return{loading:!1,loading_bill:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){this.article.user_id==this.auth.getAuth.id&&this.$nextTick(()=>{const i="#"+this.article.id,o=new Swiper(i,{resistanceRatio:.85,initialSlide:0,resistance:!0,allowSlideNext:!1,momentumBounce:!0,speed:150});o.on("transitionStart",()=>{this.on_delete=!0,this.loading=!0,this.setTimeout=setTimeout(()=>{this.deleteArticle().then(e=>{o.destroy()})},3e3),this.setInterval=setInterval(()=>{++this.counter},1e3)})})},computed:{_article:function(){return V()},dashboard:function(){return D()},auth:function(){return M()}},methods:{deleteArticle:async function(){return await this._article.deleteArticle(this.article.id).then(i=>{this.$route.params.id&&this.$router.push({name:"articles.list"})})},aditArticle:function(){this.$router.push({name:"articles.update",params:{id:this.article.id}})},viewArticle:function(){this.$router.push({name:"articles.view",params:{id:this.article.id}})},cancelBill:async function(){return this.loading_bill=!0,await this._article.cancelBill(this.article).then(i=>(this.loading_bill=!1,i))},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.article.bill_id}})},toggleBill:function(){this._article.toggleBill(this.article.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},p=()=>{E(i=>({ce5f5954:i.color}))},w=b.setup;b.setup=w?(i,o)=>(p(),w(i,o)):p;const F=["id"],P={class:"swiper-wrapper"},R={class:"swiper-slide width_card"},q={key:1};function G(i,o,e,H,J,n){const y=l("v-progress-linear"),m=l("v-chip"),_=l("v-icon"),C=l("v-progress-circular"),x=l("v-checkbox"),A=l("v-img"),B=l("v-avatar"),T=l("v-card-text"),k=l("v-spacer"),h=l("v-btn"),z=l("v-tooltip"),S=l("v-card-actions"),N=l("v-card");return r(),f("div",{id:e.article.id,class:"swiper-container"},[g("div",P,[g("div",R,[a(N,{hover:"",class:O(["mx-auto",{on_delete:i.on_delete,"bg-blue-grey-lighten-5":e.article.bill_id>>0&&e.article.bill_id!==!0&&!i.on_delete}])},{loader:t(()=>[a(y,{active:i.loading_bill,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),subtitle:t(()=>[c(d(e.article.date)+" | Created : ",1),n.auth.getAuth.id==e.article.user_id?(r(),s(m,{key:0,size:"x-small",color:"green"},{default:t(()=>[c("Me")]),_:1})):(r(),s(m,{key:1,size:"x-small",color:"blue"},{default:t(()=>[c(d(e.article.user.name),1)]),_:1}))]),title:t(()=>[e.article.star?(r(),s(_,{key:0,size:"small",class:"mt-0 mb-1",color:"yellow"},{default:t(()=>[c("mdi-star")]),_:1})):u("",!0),c(" "+d(e.article.product.name),1)]),append:t(()=>[i.loading?(r(),f("div",{key:0,class:"cursor-pointer",onClick:o[0]||(o[0]=(...v)=>n.rollback&&n.rollback(...v))},[a(C,{size:30,width:1,color:"primary",indeterminate:""},{default:t(()=>[i.pause?(r(),s(_,{key:0},{default:t(()=>[c(" mdi-pause ")]),_:1})):(r(),f("span",q,d(i.counter),1))]),_:1})])):u("",!0),g("div",null,[!i.$route.params.id&&(e.article.bill_id===null||e.article.bill_id===!0||e.article.bill_id===!1)&&!e.article.is_private?(r(),s(x,{key:0,"model-value":!!e.article.bill_id,"hide-details":"",onClick:n.toggleBill,color:"primary"},null,8,["model-value","onClick"])):u("",!0)])]),prepend:t(()=>[a(B,{rounded:"0"},{default:t(()=>[a(A,{alt:"charges-timeline",class:"img_border_radius",src:"/storage/article.gif"})]),_:1})]),default:t(()=>[a(T,null,{default:t(()=>[c(d(e.article.description),1)]),_:1}),a(k),a(S,{class:"text-green bg-amber-lighten-5"},{default:t(()=>[a(_,{color:"green",class:"mx-1"},{default:t(()=>[c("mdi-cash")]),_:1}),c(d(i.formatFloatNumber(e.article.price))+" MAD ",1),a(k),e.article.bill_id>>0&&e.article.bill_id!==!0?(r(),s(h,{key:0,class:"mr-2",color:"blue-darken-1",size:"x-small",variant:"tonal",icon:"mdi-invoice-text-fast-outline",onClick:n.viewBill},null,8,["onClick"])):u("",!0),e.article.bill_id>>0&&e.article.bill_id!==!0?(r(),s(h,{key:1,class:"mr-2",color:"deep-purple-darken-1",size:"x-small",variant:"tonal",icon:"mdi-text-box-remove",onClick:n.cancelBill},null,8,["onClick"])):u("",!0),e.article.user_id==n.auth.getAuth.id?(r(),s(h,{key:2,class:"mr-2",color:"orange",size:"x-small",variant:"tonal",icon:"mdi-pencil",onClick:n.aditArticle},null,8,["onClick"])):u("",!0),a(z,{location:"top",text:e.article.is_private?"Only Me":"To All Brotherhood"},{activator:t(({props:v})=>[a(m,j(v,{variant:"tonal",color:e.article.is_private?"red":"green"}),{default:t(()=>[a(_,{onClick:n.viewArticle},{default:t(()=>[c(d(e.article.is_private?"mdi-eye-off":"mdi-eye"),1)]),_:1},8,["onClick"])]),_:2},1040,["color"])]),_:1},8,["text"])]),_:1})]),_:1},8,["class"])])])],8,F)}const Q=I(b,[["render",G]]);export{Q as A};
