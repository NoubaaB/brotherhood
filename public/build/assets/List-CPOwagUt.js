import{D as Q}from"./DatePicker-Sk3IKhaz.js";import{_ as A,u as C,r as a,o as d,c as g,w as t,a as e,f as v,F as y,g as z,i as E,d as H,b as n,t as m,m as B,j as x,h as O}from"./app-BV7BMnHs.js";import{S as T,N as q}from"./Skeleton-BMzu-gi8.js";import{u as D}from"./Article-Bgb2Tfy1.js";import{A as G}from"./Article-BmM0aEdU.js";const J={components:{Article:G,Skeleton:T,NoItemInList:q},computed:{dashboard:function(){return C()},article:function(){return D()}}},K={key:1};function R(r,i,N,S,I,l){const h=a("Article"),p=a("v-col"),u=a("NoItemInList"),s=a("Skeleton"),_=a("v-row"),k=a("v-card-text"),c=a("v-card");return d(),g(c,null,{default:t(()=>[e(k,null,{default:t(()=>[e(_,{align:"center",justify:"center",dense:""},{default:t(()=>[l.dashboard.is_fetch?(d(),v("div",K,[e(p,null,{default:t(()=>[e(s,{n:3,type:"list-item-avatar-two-line , list-item-two-line ,table-tfoot"})]),_:1})])):(d(),v(y,{key:0},[l.article.articles.length>0?(d(!0),v(y,{key:0},z(l.article.articles,b=>(d(),g(p,{cols:"12",md:"6",key:b.id},{default:t(()=>[e(h,{article:b},null,8,["article"])]),_:2},1024))),128)):(d(),g(p,{key:1,cols:"12",md:"6",class:"text-center"},{default:t(()=>[e(u)]),_:1}))],64))]),_:1})]),_:1})]),_:1})}const W=A(J,[["render",R]]),X={components:{DatePicker:Q,Articles:W},data:function(){return{loading:!1,snackbar_bill:!1,toggle_bills:!1,bill:null}},computed:{dashboard:function(){return C()},article:function(){return D()},auth:function(){return E()},user:function(){return H()}},methods:{makeBill:async function(){this.loading=!0,await this.article.makeBill().then(r=>{this.loading=!1,r===!0?this.$router.push({name:"bills.list"}):(this.snackbar_bill=!0,this.bill=r)})},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.bill.id}})},toggleBills:function(){this.article.toggleBills(this.toggle_bills)}},mounted:function(){this.article.users_id=this.user.users.map(r=>r.id),this.dashboard.getData()},watch:{"dashboard.date_start":function(){this.dashboard.getData()},"dashboard.date_end":function(){this.dashboard.getData()}}},Y={class:"text-blue"};function Z(r,i,N,S,I,l){const h=a("v-img"),p=a("v-avatar"),u=a("v-row"),s=a("v-chip"),_=a("v-icon"),k=a("v-chip-group"),c=a("v-col"),b=a("DatePicker"),L=a("v-checkbox"),M=a("v-list-item"),U=a("v-select"),w=a("v-btn"),P=a("Articles"),F=a("v-divider"),j=a("v-snackbar");return d(),v(y,null,[e(u,null,{default:t(()=>[e(p,{size:"150",class:"mx-auto",rounded:"0"},{default:t(()=>[e(h,{alt:"dashboards",src:"/storage/articles_list.gif"})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(c,null,{default:t(()=>[e(b,{StateModel:l.dashboard},{add:t(()=>[e(c,null,{default:t(()=>[e(k,{"center-active":"",modelValue:l.article.article_filter,"onUpdate:modelValue":[i[0]||(i[0]=o=>l.article.article_filter=o),l.article.resetBillPlanning],filter:"",multiple:""},{default:t(()=>[e(s,{value:"0",color:"red"},{default:t(()=>[n("My Article")]),_:1}),e(s,{value:"1",color:"green"},{default:t(()=>[n("Other Articles")]),_:1}),e(s,{value:"2",color:"blue"},{default:t(()=>[n("Bills")]),_:1}),e(s,{value:"3",color:"purple-lighten-2"},{default:t(()=>[e(_,null,{default:t(()=>[n(m(l.article.article_filter.find(o=>o=="3")?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["StateModel"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(c,{class:"text-center pt-0"},{default:t(()=>[e(L,{class:"pr-2","hide-details":"",onClick:l.toggleBills,modelValue:r.toggle_bills,"onUpdate:modelValue":i[1]||(i[1]=o=>r.toggle_bills=o),color:"primary"},null,8,["onClick","modelValue"])]),_:1}),e(c,{class:"text-center px-0"},{default:t(()=>[e(s,{color:"blue"},{default:t(()=>[e(_,null,{default:t(()=>[n(" mdi-cart-plus ")]),_:1}),n(" "+m(l.article.articles.length),1)]),_:1})]),_:1}),e(c,{class:"text-center"},{default:t(()=>[e(s,{color:"blue",variant:"tonal"},{default:t(()=>[e(_,{class:"mr-2"},{default:t(()=>[n(" mdi-cash-refund ")]),_:1}),n(" "+m(r.formatFloatNumber(l.article.total_articles))+" MAD ",1)]),_:1})]),_:1}),e(c,{class:"text-center pl-0"},{default:t(()=>[e(s,{disabled:l.article.total_articles_selected==0,color:"amber",variant:"tonal"},{default:t(()=>[e(_,{class:"mr-2"},{default:t(()=>[n(" mdi-cash ")]),_:1}),n(" "+m(r.formatFloatNumber(l.article.total_articles_selected))+" MAD ",1)]),_:1},8,["disabled"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(c,{class:"text-center"},{default:t(()=>[e(U,{modelValue:l.article.users_id,"onUpdate:modelValue":i[2]||(i[2]=o=>l.article.users_id=o),items:l.user.users_activated,"item-value":"id","item-text":"name",color:"blue-grey-lighten-2",variant:"solo-filled",rounded:"",flat:"","hide-spin-buttons":"",multiple:"","hide-details":"","menu-icon":""},{chip:t(({props:o,item:f,index:V})=>[V<2?(d(),g(s,B({key:0,"prepend-avatar":f.raw.image,text:r.formatStringLength(f.raw.name,2),color:"blue"},o),null,16,["prepend-avatar","text"])):x("",!0),V===2?(d(),v("span",B({key:1},o,{class:"text-grey text-caption align-self-center"})," (+"+m(l.article.users_id.length-2)+") ",17)):x("",!0)]),item:t(({props:o,item:f})=>[e(M,B(o,{"prepend-avatar":f.raw.image,subtitle:f.raw.email,title:f.raw.name}),null,16,["prepend-avatar","subtitle","title"])]),_:1},8,["modelValue","items"])]),_:1}),e(c,{class:"text-center mt-2"},{default:t(()=>[e(w,{loading:r.loading,disabled:l.article.getBillQueue.length==0||l.article.users_id.length==0,rounded:"",onClick:l.makeBill,color:"blue"},{default:t(()=>[e(_,null,{default:t(()=>[n("mdi-text-box-plus")]),_:1}),n(" "+m(l.article.getBillQueue.length)+" Make Bill ",1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1}),e(u,{class:"center_empty"},{default:t(()=>[e(P)]),_:1}),e(j,{modelValue:r.snackbar_bill,"onUpdate:modelValue":i[4]||(i[4]=o=>r.snackbar_bill=o),color:"white"},{actions:t(()=>[e(w,{rounded:"",color:"blue",variant:"tonal",class:"mr-2",onClick:l.viewBill},{default:t(()=>[n(" View ")]),_:1},8,["onClick"]),e(F,{vertical:""}),e(w,{color:"pink",variant:"text",onClick:i[3]||(i[3]=o=>r.snackbar_bill=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(" Bill NÂ° : "),O("strong",Y,m(r.bill.id),1),n(" Has Been Created ")]),_:1},8,["modelValue"])],64)}const re=A(X,[["render",Z]]);export{re as default};
