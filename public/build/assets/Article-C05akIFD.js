import{u as D}from"./Article-Bs9X3sSp.js";import{_ as N,u as L,i as j,r,o as c,f,h,a,w as t,b as n,t as d,c as s,j as o,m as I,p as S,q as H}from"./app-DzWa19Ku.js";const g={props:{article:Object},data:function(){return{loading:!1,loading_bill:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){},computed:{_article:function(){return D()},dashboard:function(){return L()},auth:function(){return j()}},methods:{deleteModel:function(){this.dashboard.delete_dialog=!this.dashboard.delete_dialog,this.dashboard.delete_model_name="Article",this.dashboard.deleteModel=this.deleteArticle},deleteArticle:async function(){return await this._article.deleteArticle(this.article.id).then(l=>{this.$route.params.id&&this.$router.push({name:"articles.list"})})},aditArticle:function(){this.$router.push({name:"articles.update",params:{id:this.article.id}})},viewArticle:function(){this.$router.push({name:"articles.view",params:{id:this.article.id}})},cancelBill:async function(){return this.loading_bill=!0,await this._article.cancelBill(this.article).then(l=>(this.loading_bill=!1,l))},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.article.bill_id}})},toggleBill:function(){this._article.toggleBill(this.article.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},y=()=>{H(l=>({bbe5c7c2:l.color}))},w=g.setup;g.setup=w?(l,_)=>(y(),w(l,_)):y;const O=["id"],q={class:"swiper-wrapper"},E={class:"swiper-slide width_card"},F={key:1},P=["innerHTML"];function G(l,_,e,J,K,i){const C=r("v-progress-linear"),v=r("v-chip"),u=r("v-icon"),A=r("v-progress-circular"),m=r("v-btn"),x=r("v-checkbox"),p=r("v-img"),B=r("v-avatar"),T=r("v-card-text"),k=r("v-spacer"),z=r("v-tooltip"),M=r("v-card-actions"),V=r("v-card");return c(),f("div",{id:e.article.id,class:"swiper-container"},[h("div",q,[h("div",E,[a(V,{hover:"",class:S(["mx-auto",{on_delete:l.on_delete,"bg-blue-grey-lighten-3":e.article.bill_id>>0&&e.article.bill_id!==!0&&!l.on_delete}])},{loader:t(()=>[a(C,{active:l.loading_bill,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),subtitle:t(()=>[n(d(e.article.date)+" | Created : ",1),i.auth.getAuth.id==e.article.user_id?(c(),s(v,{key:0,size:"x-small",color:"green"},{default:t(()=>[n("Me")]),_:1})):(c(),s(v,{key:1,size:"x-small",color:"blue"},{default:t(()=>[n(d(e.article.user.name),1)]),_:1}))]),title:t(()=>[e.article.star?(c(),s(u,{key:0,size:"small",class:"mt-0 mb-1",color:"yellow"},{default:t(()=>[n("mdi-star")]),_:1})):o("",!0),n(" "+d(e.article.product.name),1)]),append:t(()=>[l.loading?(c(),f("div",{key:0,class:"cursor-pointer",onClick:_[0]||(_[0]=(...b)=>i.rollback&&i.rollback(...b))},[a(A,{size:30,width:1,color:"primary",indeterminate:""},{default:t(()=>[l.pause?(c(),s(u,{key:0},{default:t(()=>[n(" mdi-pause ")]),_:1})):(c(),f("span",F,d(l.counter),1))]),_:1})])):o("",!0),h("div",null,[e.article.user_id==i.auth.getAuth.id&&i.dashboard.isLessThanTwoDays(e.article.date)?(c(),s(m,{key:0,icon:"",size:"small",variant:"outlined",color:"red"},{default:t(()=>[a(u,{onClick:i.deleteModel,color:"red"},{default:t(()=>[n(" mdi-close ")]),_:1},8,["onClick"])]),_:1})):o("",!0),!l.$route.params.id&&(e.article.bill_id===null||e.article.bill_id===!0||e.article.bill_id===!1)&&!e.article.is_private?(c(),s(x,{key:1,"model-value":!!e.article.bill_id,"hide-details":"",onClick:i.toggleBill,color:"primary"},null,8,["model-value","onClick"])):o("",!0)])]),prepend:t(()=>[a(B,{rounded:"0"},{default:t(()=>[a(p,{alt:"charges-timeline",class:"img_border_radius",src:"/storage/article.gif"})]),_:1})]),default:t(()=>[a(T,null,{default:t(()=>[h("div",{innerHTML:e.article.description.replace(/(?:\r\n|\r|\n)/g,"<br>")},null,8,P)]),_:1}),a(k),a(M,{class:"text-green bg-amber-lighten-5"},{default:t(()=>[a(u,{color:"green",class:"mx-1"},{default:t(()=>[n("mdi-cash")]),_:1}),n(d(l.formatFloatNumber(e.article.price))+" MAD ",1),a(k),e.article.bill_id>>0&&e.article.bill_id!==!0?(c(),s(m,{key:0,class:"mr-2",color:"blue-darken-1",size:"x-small",variant:"tonal",icon:"mdi-invoice-text-fast-outline",onClick:i.viewBill},null,8,["onClick"])):o("",!0),e.article.bill_id>>0&&e.article.bill_id!==!0&&e.article.user_id==i.auth.getAuth.id&&i.dashboard.isLessThanTwoDays(e.article.date)?(c(),s(m,{key:1,class:"mr-2",color:"deep-purple-darken-1",size:"x-small",variant:"tonal",icon:"mdi-text-box-remove",onClick:i.cancelBill},null,8,["onClick"])):o("",!0),e.article.user_id==i.auth.getAuth.id&&e.article.bill_id==null?(c(),s(m,{key:2,class:"mr-2",color:"orange",size:"x-small",variant:"tonal",icon:"mdi-pencil",onClick:i.aditArticle},null,8,["onClick"])):o("",!0),a(z,{location:"top",text:e.article.is_private?"Only Me":"To All Brotherhood"},{activator:t(({props:b})=>[a(v,I(b,{variant:"tonal",color:e.article.is_private?"red":"green"}),{default:t(()=>[a(u,{onClick:i.viewArticle},{default:t(()=>[n(d(e.article.is_private?"mdi-eye-off":"mdi-eye"),1)]),_:1},8,["onClick"])]),_:2},1040,["color"])]),_:1},8,["text"])]),_:1})]),_:1},8,["class"])])])],8,O)}const U=N(g,[["render",G]]);export{U as A};
