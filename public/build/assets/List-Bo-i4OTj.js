import{D as Q}from"./DatePicker-CSoD6z2S.js";import{_ as A,N as z,u as C,r,o as c,c as p,w as t,a as e,f as g,F as B,g as E,i as H,d as T,m as v,j as b,t as m,b as o,h as q}from"./app-Bm1Rwhpz.js";import{S as G}from"./Skeleton-nOhZxjlL.js";import{u as D}from"./Article-BmeIK8TL.js";import{A as J}from"./Article-Ci1-MQAS.js";const K={components:{Article:J,Skeleton:G,NoItemInList:z},computed:{dashboard:function(){return C()},article:function(){return D()}}},O={key:1};function R(n,s,N,S,L,l){const x=r("Article"),h=r("v-col"),f=r("NoItemInList"),u=r("Skeleton"),w=r("v-row"),y=r("v-card-text"),d=r("v-card");return c(),p(d,null,{default:t(()=>[e(y,null,{default:t(()=>[e(w,{align:"center",justify:"center",dense:""},{default:t(()=>[l.dashboard.is_fetch?(c(),g("div",O,[e(h,null,{default:t(()=>[e(u,{n:3,type:"list-item-avatar-two-line , list-item-two-line ,table-tfoot"})]),_:1})])):(c(),g(B,{key:0},[l.article.articles.length>0?(c(!0),g(B,{key:0},E(l.article.articles,_=>(c(),p(h,{cols:"12",md:"6",key:_.id},{default:t(()=>[e(x,{article:_},null,8,["article"])]),_:2},1024))),128)):(c(),p(h,{key:1,cols:"12",md:"6",class:"text-center"},{default:t(()=>[e(f,{name:"Articles"})]),_:1}))],64))]),_:1})]),_:1})]),_:1})}const W=A(K,[["render",R]]),X={components:{DatePicker:Q,Articles:W},data:function(){return{loading:!1,snackbar_bill:!1,toggle_bills:!1,bill:null}},computed:{dashboard:function(){return C()},article:function(){return D()},auth:function(){return H()},user:function(){return T()}},methods:{makeBill:async function(){this.loading=!0,await this.article.makeBill().then(n=>{this.loading=!1,n===!0?this.$router.push({name:"bills.list"}):(this.snackbar_bill=!0,this.bill=n)})},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.bill.id}})},toggleBills:function(){this.article.toggleBills(this.toggle_bills)}},mounted:function(){this.article.users_id=this.user.users_activated.map(n=>n.id),this.dashboard.getData()},watch:{"dashboard.date_start":function(){this.dashboard.getData()},"dashboard.date_end":function(){this.dashboard.getData()}}},Y={class:"text-blue"};function Z(n,s,N,S,L,l){const x=r("v-img"),h=r("v-avatar"),f=r("v-row"),u=r("v-chip"),w=r("v-list-item"),y=r("v-select"),d=r("v-col"),_=r("v-icon"),U=r("v-chip-group"),I=r("DatePicker"),M=r("v-checkbox"),V=r("v-btn"),P=r("Articles"),F=r("v-divider"),j=r("v-snackbar");return c(),g(B,null,[e(f,null,{default:t(()=>[e(h,{size:"150",class:"mx-auto",rounded:"0"},{default:t(()=>[e(x,{alt:"dashboards",src:"/storage/articles_list.gif"})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(I,{StateModel:l.dashboard},{add:t(()=>[e(d,{class:"text-center",cols:"9"},{default:t(()=>[e(y,{modelValue:l.article.filter_users_id,"onUpdate:modelValue":s[0]||(s[0]=a=>l.article.filter_users_id=a),items:l.user.users_activated,"item-value":"id","item-text":"name",color:"blue-grey-lighten-2",variant:"solo-filled",rounded:"",flat:"","hide-spin-buttons":"",multiple:"","hide-details":"","menu-icon":""},{chip:t(({props:a,item:i,index:k})=>[k<3&&i.raw.name!=null?(c(),p(u,v({key:0,"prepend-avatar":i.raw.image,text:n.formatStringLength(i.raw.name,2),color:"blue"},a),null,16,["prepend-avatar","text"])):b("",!0),k===3?(c(),g("span",v({key:1},a,{class:"text-grey text-caption align-self-center"})," (+"+m(l.article.users_id.length-3)+") ",17)):b("",!0)]),item:t(({props:a,item:i})=>[i.raw.name!=null?(c(),p(w,v({key:0},a,{"prepend-avatar":i.raw.image,subtitle:i.raw.email,title:i.raw.name}),null,16,["prepend-avatar","subtitle","title"])):b("",!0)]),_:1},8,["modelValue","items"])]),_:1}),e(d,null,{default:t(()=>[e(U,{"center-active":"",modelValue:l.article.article_filter,"onUpdate:modelValue":[s[1]||(s[1]=a=>l.article.article_filter=a),l.article.resetBillPlanning],filter:"",multiple:""},{default:t(()=>[e(u,{value:"3",color:"purple-lighten-2"},{default:t(()=>[e(_,null,{default:t(()=>[o(m(l.article.article_filter.find(a=>a=="3")?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["StateModel"])]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,{class:"text-center pt-0"},{default:t(()=>[e(M,{class:"pr-2","hide-details":"",onClick:l.toggleBills,modelValue:n.toggle_bills,"onUpdate:modelValue":s[2]||(s[2]=a=>n.toggle_bills=a),color:"primary"},null,8,["onClick","modelValue"])]),_:1}),e(d,{class:"text-center px-0"},{default:t(()=>[e(u,{color:"blue"},{default:t(()=>[e(_,null,{default:t(()=>[o(" mdi-cart-plus ")]),_:1}),o(" "+m(l.article.articles.length),1)]),_:1})]),_:1}),e(d,{class:"text-center"},{default:t(()=>[e(u,{color:"blue",variant:"tonal"},{default:t(()=>[e(_,{class:"mr-2"},{default:t(()=>[o(" mdi-cash-refund ")]),_:1}),o(" "+m(n.formatFloatNumber(l.article.total_articles))+" MAD ",1)]),_:1})]),_:1}),e(d,{class:"text-center pl-0"},{default:t(()=>[e(u,{disabled:l.article.total_articles_selected==0,color:"amber",variant:"tonal"},{default:t(()=>[e(_,{class:"mr-2"},{default:t(()=>[o(" mdi-cash ")]),_:1}),o(" "+m(n.formatFloatNumber(l.article.total_articles_selected))+" MAD ",1)]),_:1},8,["disabled"])]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,{class:"text-center"},{default:t(()=>[e(y,{modelValue:l.article.users_id,"onUpdate:modelValue":s[3]||(s[3]=a=>l.article.users_id=a),items:l.user.users_activated,"item-value":"id","item-text":"name",color:"blue-grey-lighten-2",variant:"solo-filled",rounded:"",flat:"","hide-spin-buttons":"",multiple:"","hide-details":"","menu-icon":""},{chip:t(({props:a,item:i,index:k})=>[k<2&&i.raw.name!=null?(c(),p(u,v({key:0,"prepend-avatar":i.raw.image,text:n.formatStringLength(i.raw.name,2),color:"blue"},a),null,16,["prepend-avatar","text"])):b("",!0),k===2?(c(),g("span",v({key:1},a,{class:"text-grey text-caption align-self-center"})," (+"+m(l.article.users_id.length-2)+") ",17)):b("",!0)]),item:t(({props:a,item:i})=>[i.raw.name!=null?(c(),p(w,v({key:0},a,{"prepend-avatar":i.raw.image,subtitle:i.raw.email,title:i.raw.name}),null,16,["prepend-avatar","subtitle","title"])):b("",!0)]),_:1},8,["modelValue","items"])]),_:1}),e(d,{class:"text-center mt-2"},{default:t(()=>[e(V,{loading:n.loading,disabled:l.article.getBillQueue.length==0||l.article.users_id.length==0,rounded:"",onClick:l.makeBill,color:"blue"},{default:t(()=>[e(_,null,{default:t(()=>[o("mdi-text-box-plus")]),_:1}),o(" "+m(l.article.getBillQueue.length)+" Make Bill ",1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1}),e(f,{class:"center_empty"},{default:t(()=>[e(P)]),_:1}),e(j,{modelValue:n.snackbar_bill,"onUpdate:modelValue":s[5]||(s[5]=a=>n.snackbar_bill=a),color:"white"},{actions:t(()=>[e(V,{rounded:"",color:"blue",variant:"tonal",class:"mr-2",onClick:l.viewBill},{default:t(()=>[o(" View ")]),_:1},8,["onClick"]),e(F,{vertical:""}),e(V,{color:"pink",variant:"text",onClick:s[4]||(s[4]=a=>n.snackbar_bill=!1)},{default:t(()=>[o(" Close ")]),_:1})]),default:t(()=>[o(" Bill NÂ° : "),q("strong",Y,m(n.bill.id),1),o(" Has Been Created ")]),_:1},8,["modelValue"])],64)}const re=A(X,[["render",Z]]);export{re as default};
