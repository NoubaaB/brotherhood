import{_ as S,d as N,r as n,o as u,e as $,h as b,a as r,w as o,b as U,t as C,c as V,j as T,n as M,p as j,g as O,m as I}from"./app-s7Sm_ZbW.js";import{u as R,r as B,m as c,a as p,e as F,s as G}from"./index-BC9ynbx4.js";const k={props:{user:Object},data:function(){return{loading:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){this.$nextTick(()=>{const e="#"+this.user.id,s=new Swiper(e,{resistanceRatio:.85,initialSlide:0,resistance:!0,allowSlideNext:!1,momentumBounce:!0,speed:150});s.on("transitionStart",()=>{this.on_delete=!0,this.loading=!0,this.setTimeout=setTimeout(()=>{this.deleteUser().then(d=>{s.destroy()})},3e3),this.setInterval=setInterval(()=>{++this.counter},1e3)})})},computed:{_user:function(){return N()},get_date:function(){return moment(this.user.created_at).format("YYYY/MM/DD")}},methods:{editUser:function(){this.$emit("editUser",!0,this.user.id)},deleteUser:async function(){await this._user.deleteUser(this.user.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},L=()=>{j(e=>({"6c350e78":e.color}))},Y=k.setup;k.setup=Y?(e,s)=>(L(),Y(e,s)):L;const H=["id"],J={class:"swiper-wrapper"},K={class:"swiper-slide"},Q={key:1};function W(e,s,d,q,D,a){const f=n("v-progress-linear"),l=n("v-btn"),i=n("v-icon"),v=n("v-progress-circular"),_=n("v-img"),h=n("v-avatar"),g=n("v-card");return u(),$("div",{id:d.user.id,class:"swiper-container"},[b("div",J,[b("div",K,[r(g,{class:M(["mx-auto",{on_delete:e.on_delete}]),title:d.user.name},{loader:o(()=>[r(f,{active:e.loading,indeterminate:"",height:"3",color:"red"},null,8,["active"])]),subtitle:o(()=>[U(C(a.get_date),1)]),append:o(()=>[r(l,{size:"x-small",color:"orange",icon:"mdi-pencil",variant:"tonal",onClick:a.editUser,class:"mr-2"},null,8,["onClick"]),e.loading?(u(),$("div",{key:0,class:"cursor-pointer",onClick:s[0]||(s[0]=(...w)=>a.rollback&&a.rollback(...w))},[r(v,{size:30,width:1,color:"primary",indeterminate:""},{default:o(()=>[e.pause?(u(),V(i,{key:0},{default:o(()=>[U(" mdi-pause ")]),_:1})):(u(),$("span",Q,C(e.counter),1))]),_:1})])):T("",!0)]),prepend:o(()=>[r(h,{size:"50"},{default:o(()=>[r(_,{src:d.user.image},null,8,["src"])]),_:1})]),_:1},8,["class","title"])])])],8,H)}const re=S(k,[["render",W]]),X={props:{user_id:Number},data:function(){return{visible:!1,form:{name:"",email:"",image:"/storage/users/alien_2.gif",password:"",confirm_password:""},v$:R()}},computed:{user:function(){return N()},auth:function(){return O()},images:function(){let e=[];for(let s=1;s<=11;s++)e.push({name:"alien 1",url:`/storage/users/alien_${s}.png`});for(let s=1;s<=2;s++)e.push({name:"alien Animation 1",url:`/storage/users/alien_${s}.gif`});return e}},mounted:function(){this.user_id&&(this.form=this.user.users.find(e=>e.id==this.user_id))},methods:{cancelDialog:function(){this.$emit("cancelDialog")},submitUser:async function(){let e=null;this.user_id?e=await this.user.updateUser(this.user_id,this.form):e=await this.user.postUser(this.form),this.$route.params.id==this.auth.getAuth.id&&(this.auth.user.name=e.name,this.auth.user.email=e.email,this.auth.user.image=e.image),this.$emit("cancelDialog")}},validations:function(){return{form:{name:{required:B,minLength:c(6),maxLength:p(25)},email:{required:B,email:F,minLength:c(6),maxLength:p(35)},password:{minLength:c(0),maxLength:p(35)},confirm_password:{minLength:c(0),maxLength:p(35),sameAsPassword:G(this.form.password)}}}}},Z=b("small",{class:"text-caption text-medium-emphasis"},"*indicates required field",-1);function x(e,s,d,q,D,a){const f=n("v-progress-linear"),l=n("v-text-field"),i=n("v-col"),v=n("v-chip"),_=n("v-list-item"),h=n("v-autocomplete"),g=n("v-row"),w=n("v-card-text"),A=n("v-divider"),E=n("v-spacer"),y=n("v-btn"),P=n("v-card-actions"),z=n("v-card");return u(),V(z,{"prepend-icon":"mdi-account",title:"User Profile"},{loader:o(()=>[r(f,{active:a.user.is_fetch,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),default:o(()=>[r(w,null,{default:o(()=>[r(g,{dense:""},{default:o(()=>[r(i,{cols:"12",md:"4",sm:"6"},{default:o(()=>[r(l,{hint:"Ente Your Name",label:"Your Name",required:"",variant:"solo-filled","prepend-inner-icon":"mdi-account",rounded:"",flat:"",onInput:e.v$.form.name.$touch,onBlur:e.v$.form.name.$touch,modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.name=t),"error-messages":e.v$.form.name.$errors.map(t=>t.$message)},null,8,["onInput","onBlur","modelValue","error-messages"])]),_:1}),r(i,{cols:"12",md:"4",sm:"6"},{default:o(()=>[r(l,{hint:"Enter Your Email",label:"Your Email",type:"email",required:"",variant:"solo-filled","prepend-inner-icon":"mdi-email",rounded:"",flat:"",onInput:e.v$.form.email.$touch,onBlur:e.v$.form.email.$touch,modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=t=>e.form.email=t),"error-messages":e.v$.form.email.$errors.map(t=>t.$message)},null,8,["onInput","onBlur","modelValue","error-messages"])]),_:1}),r(i,{cols:"12",md:"4",sm:"6"},{default:o(()=>[r(h,{modelValue:e.form.image,"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.image=t),items:a.images,"item-value":"url","item-text":"name",color:"blue-grey-lighten-2",label:"Select Avatar",chips:""},{chip:o(({props:t,item:m})=>[r(v,I(t,{"prepend-avatar":m.raw.url,text:m.raw.name}),null,16,["prepend-avatar","text"])]),item:o(({props:t,item:m})=>[r(_,I(t,{"prepend-avatar":m.raw.url,subtitle:m.raw.name,title:m.raw.name}),null,16,["prepend-avatar","subtitle","title"])]),_:1},8,["modelValue","items"])]),_:1}),r(i,{cols:"12",md:"4",sm:"6"},{default:o(()=>[r(l,{hint:"Enter Your password",label:"Password","prepend-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password","onClick:prependInner":s[3]||(s[3]=t=>e.visible=!e.visible),variant:"solo-filled",rounded:"",required:"",flat:"",onInput:e.v$.form.password.$touch,onBlur:e.v$.form.password.$touch,modelValue:e.form.password,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form.password=t),"error-messages":e.v$.form.password.$errors.map(t=>t.$message)},null,8,["prepend-inner-icon","type","onInput","onBlur","modelValue","error-messages"])]),_:1}),r(i,{cols:"12",md:"4",sm:"6"},{default:o(()=>[r(l,{hint:"Confirm Your password",label:"Confirm Password","prepend-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password","onClick:prependInner":s[5]||(s[5]=t=>e.visible=!e.visible),variant:"solo-filled",rounded:"",required:"",flat:"",onInput:e.v$.form.confirm_password.$touch,onBlur:e.v$.form.confirm_password.$touch,modelValue:e.form.confirm_password,"onUpdate:modelValue":s[6]||(s[6]=t=>e.form.confirm_password=t),"error-messages":e.v$.form.confirm_password.$errors.map(t=>t.$message)},null,8,["prepend-inner-icon","type","onInput","onBlur","modelValue","error-messages"])]),_:1})]),_:1}),Z]),_:1}),r(A),r(P,null,{default:o(()=>[r(E),e.$route.params.id?T("",!0):(u(),V(y,{key:0,text:"Close",variant:"plain",onClick:a.cancelDialog},null,8,["onClick"])),r(y,{color:"blue",text:"Save",onClick:a.submitUser,variant:e.v$.$invalid?"tonal":"flat",disabled:e.v$.$invalid,loading:a.user.is_fetch},null,8,["onClick","variant","disabled","loading"])]),_:1})]),_:1})}const te=S(X,[["render",x]]);export{te as M,re as U};
