import{_ as S,d as N,r as o,o as u,e as $,i as b,a as t,w as n,b as U,t as C,c as V,h as T,n as j,p as O,g as R,m as I}from"./app-9GppF1sO.js";import{u as F,r as B,m as c,a as p,e as G,s as H}from"./index-Cg_iTyJV.js";const k={props:{user:Object},data:function(){return{loading:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){this.$nextTick(()=>{const e="#"+this.user.id,s=new Swiper(e,{resistanceRatio:.85,initialSlide:0,resistance:!0,allowSlideNext:!1,momentumBounce:!0,speed:150});s.on("transitionStart",()=>{this.on_delete=!0,this.loading=!0,this.setTimeout=setTimeout(()=>{this.deleteUser().then(d=>{s.destroy()})},3e3),this.setInterval=setInterval(()=>{++this.counter},1e3)})})},computed:{_user:function(){return N()},get_date:function(){return moment(this.user.created_at).format("YYYY/MM/DD")}},methods:{editUser:function(){this.$emit("editUser",!0,this.user.id)},deleteUser:async function(){await this._user.deleteUser(this.user.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},L=()=>{O(e=>({"73ea2f38":e.color}))},Y=k.setup;k.setup=Y?(e,s)=>(L(),Y(e,s)):L;const J=["id"],K={class:"swiper-wrapper"},Q={class:"swiper-slide"},W={key:1};function X(e,s,d,q,D,a){const f=o("v-progress-linear"),l=o("v-btn"),i=o("v-icon"),v=o("v-progress-circular"),_=o("v-img"),h=o("v-avatar"),g=o("v-card");return u(),$("div",{id:d.user.id,class:"swiper-container"},[b("div",K,[b("div",Q,[t(g,{class:j(["mx-auto",{on_delete:e.on_delete}]),title:d.user.name},{loader:n(()=>[t(f,{active:e.loading,indeterminate:"",height:"3",color:"red"},null,8,["active"])]),subtitle:n(()=>[U(C(a.get_date),1)]),append:n(()=>[t(l,{size:"x-small",color:"orange",icon:"mdi-pencil",variant:"tonal",onClick:a.editUser,class:"mr-2"},null,8,["onClick"]),e.loading?(u(),$("div",{key:0,class:"cursor-pointer",onClick:s[0]||(s[0]=(...w)=>a.rollback&&a.rollback(...w))},[t(v,{size:30,width:1,color:"primary",indeterminate:""},{default:n(()=>[e.pause?(u(),V(i,{key:0},{default:n(()=>[U(" mdi-pause ")]),_:1})):(u(),$("span",W,C(e.counter),1))]),_:1})])):T("",!0)]),prepend:n(()=>[t(h,{size:"50"},{default:n(()=>[t(_,{src:d.user.image},null,8,["src"])]),_:1})]),_:1},8,["class","title"])])])],8,J)}const re=S(k,[["render",X]]),Z={props:{user_id:Number},data:function(){return{visible:!1,form:{name:"",email:"",image:"/storage/users/alien_2.gif",password:"",confirm_password:""},v$:F()}},computed:{user:function(){return N()},auth:function(){return R()},images:function(){let e=[];for(let s=1;s<=10;s++)e.push({name:`alien ${s}`,url:`/storage/users/alien_${s}.png`});for(let s=1;s<=2;s++)e.push({name:`alien Animation ${s}`,url:`/storage/users/alien_${s}.gif`});return e}},mounted:function(){this.user_id&&(this.form=this.user.users.find(e=>e.id==this.user_id))},methods:{cancelDialog:function(){this.$emit("cancelDialog")},submitUser:async function(){let e=null;this.user_id?e=await this.user.updateUser(this.user_id,this.form):e=await this.user.postUser(this.form),this.$route.params.id==this.auth.getAuth.id&&(this.auth.user.name=e.name,this.auth.user.email=e.email,this.auth.user.image=e.image),this.$emit("cancelDialog")}},validations:function(){return{form:{name:{required:B,minLength:c(6),maxLength:p(25)},email:{required:B,email:G,minLength:c(6),maxLength:p(35)},password:{minLength:c(0),maxLength:p(35)},confirm_password:{minLength:c(0),maxLength:p(35),sameAsPassword:H(this.form.password)}}}}},x=b("small",{class:"text-caption text-medium-emphasis"},"*indicates required field",-1);function ee(e,s,d,q,D,a){const f=o("v-progress-linear"),l=o("v-text-field"),i=o("v-col"),v=o("v-chip"),_=o("v-list-item"),h=o("v-autocomplete"),g=o("v-row"),w=o("v-form"),A=o("v-card-text"),E=o("v-divider"),P=o("v-spacer"),y=o("v-btn"),z=o("v-card-actions"),M=o("v-card");return u(),V(M,{"prepend-icon":"mdi-account",title:"User Profile"},{loader:n(()=>[t(f,{active:a.user.is_fetch,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),default:n(()=>[t(A,null,{default:n(()=>[t(w,{autocomplete:"off"},{default:n(()=>[t(g,{dense:""},{default:n(()=>[t(i,{cols:"12",md:"4",sm:"6"},{default:n(()=>[t(l,{hint:"Ente Your Name",label:"Your Name",required:"",variant:"solo-filled","prepend-inner-icon":"mdi-account",rounded:"",flat:"",onInput:e.v$.form.name.$touch,onBlur:e.v$.form.name.$touch,modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r),"error-messages":e.v$.form.name.$errors.map(r=>r.$message)},null,8,["onInput","onBlur","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"4",sm:"6"},{default:n(()=>[t(l,{hint:"Enter Your Email",label:"Your Email",type:"email",required:"",variant:"solo-filled","prepend-inner-icon":"mdi-email",rounded:"",flat:"",onInput:e.v$.form.email.$touch,onBlur:e.v$.form.email.$touch,modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.email=r),"error-messages":e.v$.form.email.$errors.map(r=>r.$message)},null,8,["onInput","onBlur","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"4",sm:"6"},{default:n(()=>[t(h,{modelValue:e.form.image,"onUpdate:modelValue":s[2]||(s[2]=r=>e.form.image=r),items:a.images,"item-value":"url","item-text":"name",color:"blue-grey-lighten-2",label:"Select Avatar",chips:"",rounded:"",flat:"",variant:"solo-filled",autocomplete:"off"},{chip:n(({props:r,item:m})=>[t(v,I(r,{"prepend-avatar":m.raw.url,text:m.raw.name}),null,16,["prepend-avatar","text"])]),item:n(({props:r,item:m})=>[t(_,I(r,{"prepend-avatar":m.raw.url,subtitle:m.raw.name,title:m.raw.name}),null,16,["prepend-avatar","subtitle","title"])]),_:1},8,["modelValue","items"])]),_:1}),t(i,{cols:"12",md:"4",sm:"6"},{default:n(()=>[t(l,{hint:"Enter Your password",label:"Password","prepend-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password","onClick:prependInner":s[3]||(s[3]=r=>e.visible=!e.visible),variant:"solo-filled",rounded:"",required:"",flat:"",onInput:e.v$.form.password.$touch,onBlur:e.v$.form.password.$touch,modelValue:e.form.password,"onUpdate:modelValue":s[4]||(s[4]=r=>e.form.password=r),"error-messages":e.v$.form.password.$errors.map(r=>r.$message)},null,8,["prepend-inner-icon","type","onInput","onBlur","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"4",sm:"6"},{default:n(()=>[t(l,{hint:"Confirm Your password",label:"Confirm Password","prepend-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password","onClick:prependInner":s[5]||(s[5]=r=>e.visible=!e.visible),variant:"solo-filled",rounded:"",required:"",flat:"",onInput:e.v$.form.confirm_password.$touch,onBlur:e.v$.form.confirm_password.$touch,modelValue:e.form.confirm_password,"onUpdate:modelValue":s[6]||(s[6]=r=>e.form.confirm_password=r),"error-messages":e.v$.form.confirm_password.$errors.map(r=>r.$message)},null,8,["prepend-inner-icon","type","onInput","onBlur","modelValue","error-messages"])]),_:1})]),_:1}),x]),_:1})]),_:1}),t(E),t(z,null,{default:n(()=>[t(P),e.$route.params.id?T("",!0):(u(),V(y,{key:0,text:"Close",variant:"plain",onClick:a.cancelDialog},null,8,["onClick"])),t(y,{color:"blue",text:"Save",onClick:a.submitUser,variant:e.v$.$invalid?"tonal":"flat",disabled:e.v$.$invalid,loading:a.user.is_fetch},null,8,["onClick","variant","disabled","loading"])]),_:1})]),_:1})}const oe=S(Z,[["render",ee]]);export{oe as M,re as U};
