import{u as D}from"./Article-BZmqUQnl.js";import{_ as I,u as L,d as j,i as F,r as a,o as r,f as m,h as v,a as l,w as t,b as n,t as u,c as s,j as _,F as S,g as H,m as O,p as U,q}from"./app-Cl5w4Ol3.js";const k={props:{article:Object},data:function(){return{loading:!1,loading_bill:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){},computed:{_article:function(){return D()},dashboard:function(){return L()},user:function(){return j()},auth:function(){return F()}},methods:{deleteModel:function(){this.dashboard.delete_dialog=!this.dashboard.delete_dialog,this.dashboard.delete_model_name="Article",this.dashboard.deleteModel=this.deleteArticle},deleteArticle:async function(){return await this._article.deleteArticle(this.article.id).then(i=>{this.$route.params.id&&this.$router.push({name:"articles.list"})})},aditArticle:function(){this.$router.push({name:"articles.update",params:{id:this.article.id}})},viewArticle:function(){this.$router.push({name:"articles.view",params:{id:this.article.id}})},cancelBill:async function(){return this.loading_bill=!0,await this._article.cancelBill(this.article).then(i=>(this.loading_bill=!1,i))},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.article.bill_id}})},toggleBill:function(){this._article.toggleBill(this.article.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},w=()=>{q(i=>({"121e1f02":i.color}))},C=k.setup;k.setup=C?(i,h)=>(w(),C(i,h)):w;const E=["id"],P={class:"swiper-wrapper"},G={class:"swiper-slide width_card"},J={key:1},K=["innerHTML"];function Q(i,h,e,R,W,c){const A=a("v-progress-linear"),f=a("v-chip"),o=a("v-icon"),B=a("v-progress-circular"),g=a("v-btn"),x=a("v-checkbox"),y=a("v-img"),p=a("v-avatar"),T=a("v-card-text"),b=a("v-spacer"),z=a("v-badge"),M=a("v-tooltip"),V=a("v-card-actions"),N=a("v-card");return r(),m("div",{id:e.article.id,class:"swiper-container"},[v("div",P,[v("div",G,[l(N,{hover:"",class:U(["mx-auto",{on_delete:i.on_delete,"bg-blue-grey-lighten-3":e.article.bill_id>>0&&e.article.bill_id!==!0&&!i.on_delete}])},{loader:t(()=>[l(A,{active:i.loading_bill,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),subtitle:t(()=>[n(u(e.article.date)+" | Created : ",1),c.auth.getAuth.id==e.article.user_id?(r(),s(f,{key:0,size:"x-small",color:"green"},{default:t(()=>[n("Me")]),_:1})):(r(),s(f,{key:1,size:"x-small",color:"blue"},{default:t(()=>[n(u(e.article.user.name),1)]),_:1}))]),title:t(()=>[e.article.star?(r(),s(o,{key:0,size:"small",class:"mt-0 mb-1",color:"yellow"},{default:t(()=>[n("mdi-star")]),_:1})):_("",!0),n(" "+u(e.article.product.name),1)]),append:t(()=>[i.loading?(r(),m("div",{key:0,class:"cursor-pointer",onClick:h[0]||(h[0]=(...d)=>c.rollback&&c.rollback(...d))},[l(B,{size:30,width:1,color:"primary",indeterminate:""},{default:t(()=>[i.pause?(r(),s(o,{key:0},{default:t(()=>[n(" mdi-pause ")]),_:1})):(r(),m("span",J,u(i.counter),1))]),_:1})])):_("",!0),v("div",null,[e.article.user_id==c.auth.getAuth.id&&c.dashboard.isLessThanTwoDays(e.article.date)?(r(),s(g,{key:0,icon:"",size:"small",variant:"outlined",color:"red"},{default:t(()=>[l(o,{onClick:c.deleteModel,color:"red"},{default:t(()=>[n(" mdi-close ")]),_:1},8,["onClick"])]),_:1})):_("",!0),!i.$route.params.id&&(e.article.bill_id===null||e.article.bill_id===!0||e.article.bill_id===!1)&&!e.article.is_private?(r(),s(x,{key:1,"model-value":!!e.article.bill_id,"hide-details":"",onClick:c.toggleBill,color:"primary"},null,8,["model-value","onClick"])):_("",!0)])]),prepend:t(()=>[l(p,{rounded:"0"},{default:t(()=>[l(y,{alt:"charges-timeline",class:"img_border_radius",src:"/storage/article.gif"})]),_:1})]),default:t(()=>[l(T,null,{default:t(()=>[v("div",{innerHTML:e.article.description.replace(/(?:\r\n|\r|\n)/g,"<br>")},null,8,K)]),_:1}),l(b),l(V,{class:"text-green bg-amber-lighten-5"},{default:t(()=>[l(o,{color:"green",class:"mx-1"},{default:t(()=>[n("mdi-cash")]),_:1}),n(u(i.formatFloatNumber(e.article.price))+" MAD ",1),l(b),(r(!0),m(S,null,H(e.article.users_id,d=>(r(),m("div",{key:d,class:"mr-3"},[l(z,{color:"amber",location:"bottom end"},{badge:t(()=>[l(o,null,{default:t(()=>[n("mdi-hand-coin")]),_:1})]),default:t(()=>[l(p,{size:"20"},{default:t(()=>[l(y,{src:c.user.getUserImage(d)},null,8,["src"])]),_:2},1024)]),_:2},1024)]))),128)),l(b),e.article.bill_id>>0&&e.article.bill_id!==!0?(r(),s(g,{key:0,class:"mr-2",color:"blue-darken-1",size:"x-small",variant:"tonal",icon:"mdi-invoice-text-fast-outline",onClick:c.viewBill},null,8,["onClick"])):_("",!0),e.article.user_id==c.auth.getAuth.id&&e.article.bill_id==null?(r(),s(g,{key:1,class:"mr-2",color:"orange",size:"x-small",variant:"tonal",icon:"mdi-pencil",onClick:c.aditArticle},null,8,["onClick"])):_("",!0),l(M,{location:"top",text:e.article.is_private?"Only Me":"To All Brotherhood"},{activator:t(({props:d})=>[l(f,O(d,{variant:"tonal",color:e.article.is_private?"red":"green"}),{default:t(()=>[l(o,{onClick:c.viewArticle},{default:t(()=>[n(u(e.article.is_private?"mdi-eye-off":"mdi-eye"),1)]),_:1},8,["onClick"])]),_:2},1040,["color"])]),_:1},8,["text"])]),_:1})]),_:1},8,["class"])])])],8,E)}const Z=I(k,[["render",Q]]);export{Z as A};
