import{u as L}from"./Article-ClS75tR_.js";import{_ as N,u as I,d as j,i as F,r,o as c,f as m,h as f,a as l,w as t,b as n,t as _,c as s,j as o,F as S,g as H,m as O,p as U,q}from"./app-Do9SqPFr.js";const k={props:{article:Object},data:function(){return{loading:!1,loading_bill:!1,on_delete:!1,pause:!1,setTimeout:null,setInterval:null,counter:1,color:"white"}},mounted:function(){},computed:{_article:function(){return L()},dashboard:function(){return I()},user:function(){return j()},auth:function(){return F()}},methods:{deleteModel:function(){this.dashboard.delete_dialog=!this.dashboard.delete_dialog,this.dashboard.delete_model_name="Article",this.dashboard.deleteModel=this.deleteArticle},deleteArticle:async function(){return await this._article.deleteArticle(this.article.id).then(i=>{this.$route.params.id&&this.$router.push({name:"articles.list"})})},aditArticle:function(){this.$router.push({name:"articles.update",params:{id:this.article.id}})},viewArticle:function(){this.$router.push({name:"articles.view",params:{id:this.article.id}})},cancelBill:async function(){return this.loading_bill=!0,await this._article.cancelBill(this.article).then(i=>(this.loading_bill=!1,i))},viewBill:function(){this.$router.push({name:"bills.view",params:{id:this.article.bill_id}})},toggleBill:function(){this._article.toggleBill(this.article.id)},rollback:function(){this.pause=!0,clearTimeout(this.setTimeout),clearInterval(this.setInterval),this.on_delete=!1,this.counter=1,setTimeout(()=>{this.loading=!1,this.pause=!1},1e3)}}},C=()=>{q(i=>({"266c954c":i.color}))},A=k.setup;k.setup=A?(i,h)=>(C(),A(i,h)):C;const E=["id"],P={class:"swiper-wrapper"},G={class:"swiper-slide width_card"},J={key:1},K=["innerHTML"];function Q(i,h,e,R,W,a){const x=r("v-progress-linear"),b=r("v-chip"),d=r("v-icon"),B=r("v-progress-circular"),v=r("v-btn"),T=r("v-checkbox"),y=r("v-img"),w=r("v-avatar"),p=r("v-card-text"),g=r("v-spacer"),z=r("v-badge"),M=r("v-tooltip"),V=r("v-card-actions"),D=r("v-card");return c(),m("div",{id:e.article.id,class:"swiper-container"},[f("div",P,[f("div",G,[l(D,{hover:"",class:U(["mx-auto",{on_delete:i.on_delete,"bg-blue-grey-lighten-3":e.article.bill_id>>0&&e.article.bill_id!==!0&&!i.on_delete}])},{loader:t(()=>[l(x,{active:i.loading_bill,indeterminate:"",height:"3",color:"blue"},null,8,["active"])]),subtitle:t(()=>[n(_(e.article.date)+" | Created : ",1),a.auth.getAuth.id==e.article.user_id?(c(),s(b,{key:0,size:"x-small",color:"green"},{default:t(()=>[n("Me")]),_:1})):(c(),s(b,{key:1,size:"x-small",color:"blue"},{default:t(()=>[n(_(e.article.user.name),1)]),_:1}))]),title:t(()=>[e.article.star?(c(),s(d,{key:0,size:"small",class:"mt-0 mb-1",color:"yellow"},{default:t(()=>[n("mdi-star")]),_:1})):o("",!0),n(" "+_(e.article.product.name),1)]),append:t(()=>[i.loading?(c(),m("div",{key:0,class:"cursor-pointer",onClick:h[0]||(h[0]=(...u)=>a.rollback&&a.rollback(...u))},[l(B,{size:30,width:1,color:"primary",indeterminate:""},{default:t(()=>[i.pause?(c(),s(d,{key:0},{default:t(()=>[n(" mdi-pause ")]),_:1})):(c(),m("span",J,_(i.counter),1))]),_:1})])):o("",!0),f("div",null,[e.article.user_id==a.auth.getAuth.id&&a.dashboard.isLessThanTwoDays(e.article.date)?(c(),s(v,{key:0,icon:"",size:"small",variant:"outlined",color:"red"},{default:t(()=>[l(d,{onClick:a.deleteModel,color:"red"},{default:t(()=>[n(" mdi-close ")]),_:1},8,["onClick"])]),_:1})):o("",!0),!i.$route.params.id&&(e.article.bill_id===null||e.article.bill_id===!0||e.article.bill_id===!1)&&!e.article.is_private?(c(),s(T,{key:1,"model-value":!!e.article.bill_id,"hide-details":"",onClick:a.toggleBill,color:"primary"},null,8,["model-value","onClick"])):o("",!0)])]),prepend:t(()=>[l(w,{rounded:"0"},{default:t(()=>[l(y,{alt:"charges-timeline",class:"img_border_radius",src:"/storage/article.gif"})]),_:1})]),default:t(()=>[l(p,null,{default:t(()=>[f("div",{innerHTML:e.article.description.replace(/(?:\r\n|\r|\n)/g,"<br>")},null,8,K)]),_:1}),l(g),l(V,{class:"text-green bg-amber-lighten-5"},{default:t(()=>[l(d,{color:"green",class:"mx-1"},{default:t(()=>[n("mdi-cash")]),_:1}),n(_(i.formatFloatNumber(e.article.price))+" MAD ",1),l(g),(c(!0),m(S,null,H(e.article.users_id,u=>(c(),m("div",{key:u,class:"mr-3"},[l(z,{color:"amber",location:"bottom end"},{badge:t(()=>[l(d,null,{default:t(()=>[n("mdi-hand-coin")]),_:1})]),default:t(()=>[l(w,{size:"20"},{default:t(()=>[l(y,{src:a.user.getUserImage(u)},null,8,["src"])]),_:2},1024)]),_:2},1024)]))),128)),l(g),e.article.bill_id>>0&&e.article.bill_id!==!0?(c(),s(v,{key:0,class:"mr-2",color:"blue-darken-1",size:"x-small",variant:"tonal",icon:"mdi-invoice-text-fast-outline",onClick:a.viewBill},null,8,["onClick"])):o("",!0),e.article.bill_id>>0&&e.article.bill_id!==!0&&e.article.user_id==a.auth.getAuth.id&&a.dashboard.isLessThanTwoDays(e.article.date)?(c(),s(v,{key:1,class:"mr-2",color:"deep-purple-darken-1",size:"x-small",variant:"tonal",icon:"mdi-text-box-remove",onClick:a.cancelBill},null,8,["onClick"])):o("",!0),e.article.user_id==a.auth.getAuth.id&&e.article.bill_id==null?(c(),s(v,{key:2,class:"mr-2",color:"orange",size:"x-small",variant:"tonal",icon:"mdi-pencil",onClick:a.aditArticle},null,8,["onClick"])):o("",!0),l(M,{location:"top",text:e.article.is_private?"Only Me":"To All Brotherhood"},{activator:t(({props:u})=>[l(b,O(u,{variant:"tonal",color:e.article.is_private?"red":"green"}),{default:t(()=>[l(d,{onClick:a.viewArticle},{default:t(()=>[n(_(e.article.is_private?"mdi-eye-off":"mdi-eye"),1)]),_:1},8,["onClick"])]),_:2},1040,["color"])]),_:1},8,["text"])]),_:1})]),_:1},8,["class"])])])],8,E)}const Z=N(k,[["render",Q]]);export{Z as A};
